<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>随机名言名句 · 中国风</title>
  <style>
    /* 中国风：衬线字体 + 水墨背景 */
    @font-face{font-family:SerifCN;src:local('Songti SC'), local('SimSun'), local('Noto Serif SC');}
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: SerifCN, "Noto Serif SC", "Songti SC", serif;
      background: #f6f6f5;
      display:flex;align-items:center;justify-content:center;padding:28px;color:#111;
    }
    /* 水墨宣纸背景（CSS） */
    .paper{
      width:1000px;max-width:100%;border-radius:12px;padding:26px;background-color:#fbf9f6;
      box-shadow:0 18px 50px rgba(16,18,20,0.35);position:relative;overflow:hidden;
      border:1px solid rgba(0,0,0,0.06);
    }
    .ink{position:absolute;inset:0;background-image:
      radial-gradient(ellipse at 10% 20%, rgba(0,0,0,0.06) 0%, transparent 18%),
      radial-gradient(ellipse at 95% 80%, rgba(0,0,0,0.04) 0%, transparent 18%),
      linear-gradient(180deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01));
      mix-blend-mode:multiply;opacity:0.9;pointer-events:none}
    .border-deco{position:absolute;left:18px;top:18px;bottom:18px;width:8px;background:linear-gradient(180deg,#caa86b,#b77a3a);border-radius:6px}
    header{display:flex;align-items:center;justify-content:space-between}
    h1{font-size:26px;letter-spacing:2px}
    .controls{display:flex;gap:10px;align-items:center}
    button{padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:700;background:#ba9b61;color:#fff}
    button.ghost{background:transparent;border:1px solid rgba(0,0,0,0.08);color:inherit}
    .main{display:flex;gap:20px;margin-top:18px}
    .quote-box{flex:1;min-width:520px;padding:22px;background:rgba(255,255,250,0.7);border-radius:10px;border:1px solid rgba(0,0,0,0.04)}
    .text{font-size:28px;line-height:1.6;font-weight:600;color:#0b0b0b}
    .author{margin-top:16px;color:#4b3b2b;font-size:16px}
    .meta{margin-top:8px;color:#6b5d4a;font-size:13px}
    .side{width:320px}
    label{display:block;font-size:13px;margin-top:10px;color:#4b3b2b}
    select,input[type="text"]{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.06);background:transparent}
    .tag{display:inline-block;padding:6px 8px;border-radius:8px;background:rgba(0,0,0,0.03);margin:6px 6px 0 0;font-size:13px}
    footer{margin-top:12px;font-size:12px;color:#6b5d4a}
    .small{font-size:13px;color:#6b5d4a;margin-top:8px}
    .chop{position:absolute;right:26px;bottom:26px;width:96px;height:96px;border-radius:8px;background:rgba(180,64,64,0.08);display:grid;place-items:center;font-weight:700;color:#8b2a2a;font-size:12px}
    @media (max-width:920px){
      .main{flex-direction:column}
      .side{width:100%}
      .quote-box{min-width:unset}
    }
  </style>
</head>
<body>
  <div class="paper" role="main" aria-labelledby="title">
    <div class="ink" aria-hidden="true"></div>
    <div class="border-deco" aria-hidden="true"></div>
    <div class="chop">印·诗</div>
    <header>
      <h1 id="title">随机名言名句 · 中国风</h1>
      <div class="controls">
        <button id="nextBtn">下一句</button>
        <button id="copyBtn" class="ghost">复制</button>
        <button id="pinBtn" class="ghost">固定链接</button>
        <button id="autoBtn" class="ghost">自动轮播</button>
      </div>
    </header>

    <div class="main">
      <section class="quote-box" aria-live="polite">
        <div id="quoteText" class="text">——</div>
        <div id="quoteAuthor" class="author">— —</div>
        <div id="quoteMeta" class="meta"></div>
        <div style="margin-top:12px"><span id="tagsContainer"></span></div>
      </section>

      <aside class="side">
        <label for="authorSelect">按作者筛选</label>
        <select id="authorSelect"><option value="">（全部作者）</option></select>

        <label for="tagSelect">按标签筛选</label>
        <select id="tagSelect"><option value="">（全部标签）</option></select>

        <label for="searchInput">搜索（内容或作者）</label>
        <input id="searchInput" type="text" placeholder="输入关键字后按 Enter 搜索">

        <div class="small">当前 Seed：<span id="seedText">-</span></div>
        <div class="small">生成时间：<span id="timeText">-</span></div>

        <div style="margin-top:12px">
          <button id="exportBtn" class="ghost">导出当前文本</button>
          <button id="shuffleBtn">打乱并浏览</button>
        </div>

        <footer>说明：页面为单文件离线使用。通过 URL 参数 <code>?q=seed:12345</code> 可固定显示某条（或使用完整句子搜索）。</footer>
      </aside>
    </div>
  </div>

  <script>
  // ========== 名言数据（120 条中英混合，已去来源） ==========
  const quotes = [
    {text:"路漫漫其修远兮，吾将上下而求索。", author:"屈原", tags:["坚持","古典"], lang:"zh"},
    {text:"人生自古谁无死，留取丹心照汗青。", author:"文天祥", tags:["忠诚","古典"], lang:"zh"},
    {text:"千里之行，始于足下。", author:"老子", tags:["行动","古语"], lang:"zh"},
    {text:"学而不思则罔，思而不学则殆。", author:"孔子", tags:["学习","思考"], lang:"zh"},
    {text:"不经一番寒彻骨，哪得梅花扑鼻香。", author:"陆游", tags:["坚持","励志"], lang:"zh"},
    {text:"我思故我在。", author:"笛卡尔", tags:["哲学"], lang:"zh"},
    {text:"为天地立心，为生民立命，为往圣继绝学，为万世开太平。", author:"梁启超", tags:["志向"], lang:"zh"},
    {text:"独学而无友，则孤陋而寡闻。", author:"孔子", tags:["学习","交友"], lang:"zh"},
    {text:"不入虎穴，焉得虎子。", author:"宋王安石", tags:["勇气","行动"], lang:"zh"},
    {text:"己所不欲，勿施于人。", author:"孔子", tags:["修身","伦理"], lang:"zh"},
    {text:"莫等闲，白了少年头，空悲切。", author:"岳飞", tags:["珍惜时间"], lang:"zh"},
    {text:"天将降大任于是人也，必先苦其心志，劳其筋骨。", author:"孟子", tags:["磨练","责任"], lang:"zh"},
    {text:"海纳百川，有容乃大。", author:"林则徐", tags:["胸怀"], lang:"zh"},
    {text:"谁言寸草心，报得三春晖。", author:"孟郊", tags:["感恩"], lang:"zh"},
    {text:"Do not go where the path may lead, go instead where there is no path and leave a trail.", author:"Ralph Waldo Emerson", tags:["individuality","courage"], lang:"en"},
    {text:"Be yourself; everyone else is already taken.", author:"Oscar Wilde", tags:["individuality"], lang:"en"},
    {text:"Whether you think you can or you think you can’t, you’re right.", author:"Henry Ford", tags:["mindset","action"], lang:"en"},
    {text:"The only limit to our realization of tomorrow is our doubts of today.", author:"Franklin D. Roosevelt", tags:["inspiration"], lang:"en"},
    {text:"Keep your face always toward the sunshine—and shadows will fall behind you.", author:"Walt Whitman", tags:["positivity"], lang:"en"},
    {text:"The journey of a thousand miles begins with one step.", author:"Lao Tzu", tags:["action","inspiration"], lang:"en"},
    {text:"知之者不如好之者，好之者不如乐之者。", author:"孔子", tags:["学习"], lang:"zh"},
    {text:"虚心使人进步，骄傲使人落后。", author:"毛泽东", tags:["学习","态度"], lang:"zh"},
    {text:"不畏浮云遮望眼，自缘身在最高层。", author:"王安石", tags:["视野"], lang:"zh"},
    {text:"成功的秘诀在于永不改变既定的目标。", author:"爱默生", tags:["成功","坚持"], lang:"zh"},
    {text:"喜欢即自由，痛苦即束缚。", author:"杰克·伦敦", tags:["自由"], lang:"zh"},
    {text:"人生如逆旅，我亦是行人。", author:"苏轼", tags:["人生"], lang:"zh"},
    {text:"虚怀若谷，方能容物。", author:"古语", tags:["谦逊"], lang:"zh"},
    {text:"不登高山，不知天之高也；不临深溪，不知地之厚也。", author:"荀子", tags:["见识"], lang:"zh"},
    {text:"失败乃成功之母。", author:"古语", tags:["坚持"], lang:"zh"},
    {text:"A room without books is like a body without a soul.", author:"Marcus Tullius Cicero", tags:["读书"], lang:"en"},
    {text:"To be, or not to be, that is the question.", author:"William Shakespeare", tags:["戏剧","哲学"], lang:"en"},
    {text:"沉舟侧畔千帆过，病树前头万木春。", author:"刘禹锡", tags:["希望"], lang:"zh"},
    {text:"海阔凭鱼跃，天高任鸟飞。", author:"古语", tags:["自由"], lang:"zh"},
    {text:"不以物喜，不以己悲。", author:"范仲淹", tags:["淡定"], lang:"zh"},
    {text:"知足者常足。", author:"老子", tags:["满足"], lang:"zh"},
    {text:"The best way to predict the future is to invent it.", author:"Alan Kay", tags:["future","action"], lang:"en"},
    {text:"In the middle of difficulty lies opportunity.", author:"Albert Einstein", tags:["opportunity"], lang:"en"},
    {text:"不为困境所惧，唯恐失去信念。", author:"现代格言", tags:["信念"], lang:"zh"},
    {text:"衣带渐宽终不悔，为伊消得人憔悴。", author:"柳永", tags:["爱情"], lang:"zh"},
    {text:"此情可待成追忆，只是当时已惘然。", author:"李商隐", tags:["爱情","惆怅"], lang:"zh"},
    {text:"The only thing we have to fear is fear itself.", author:"Franklin D. Roosevelt", tags:["勇气"], lang:"en"},
    {text:"How wonderful it is that nobody need wait a single moment before starting to improve the world.", author:"Anne Frank", tags:["行动"], lang:"en"},
    {text:"长风破浪会有时，直挂云帆济沧海。", author:"李白", tags:["豪情"], lang:"zh"},
    {text:"路在脚下，梦在前方。", author:"俗语", tags:["梦想"], lang:"zh"},
    {text:"努力不一定成功，但放弃一定失败。", author:"现代格言", tags:["努力"], lang:"zh"},
    {text:"To live is the rarest thing in the world. Most people exist, that is all.", author:"Oscar Wilde", tags:["生命"], lang:"en"},
    {text:"A friend is someone who knows all about you and still loves you.", author:"Elbert Hubbard", tags:["友情"], lang:"en"},
    {text:"如切如磋，如琢如磨。", author:"《礼记》", tags:["修养"], lang:"zh"},
    {text:"不经一事，不长一智。", author:"古语", tags:["经验"], lang:"zh"},
    {text:"学如逆水行舟，不进则退。", author:"古语", tags:["学习"], lang:"zh"},
    {text:"The future belongs to those who believe in the beauty of their dreams.", author:"Eleanor Roosevelt", tags:["梦想"], lang:"en"},
    {text:"读万卷书，行万里路。", author:"杜甫/古语", tags:["读书","行旅"], lang:"zh"},
    {text:"To thine own self be true.", author:"William Shakespeare", tags:["诚信"], lang:"en"},
    {text:"花有重开日，人无再少年。", author:"古语", tags:["时光"], lang:"zh"},
    {text:"不忘初心，方得始终。", author:"现代格言", tags:["信念"], lang:"zh"},
    {text:"The secret of getting ahead is getting started.", author:"Mark Twain", tags:["行动"], lang:"en"},
    {text:"Life is really simple, but we insist on making it complicated.", author:"Confucius", tags:["人生"], lang:"en"},
    {text:"居安思危，思则有备。", author:"古语", tags:["谨慎"], lang:"zh"},
    {text:"谁言寸草心，报得三春晖。", author:"孟郊", tags:["孝顺"], lang:"zh"},
    {text:"不以规矩，不能成方圆。", author:"孔子", tags:["规范"], lang:"zh"},
    {text:"Better three hours too soon than a minute too late.", author:"William Shakespeare", tags:["时间"], lang:"en"},
    {text:"失败并非成功的反义词，而是成功的一部分。", author:"现代格言", tags:["失败","成功"], lang:"zh"},
    {text:"A man who dares to waste one hour of time has not discovered the value of life.", author:"Charles Darwin", tags:["时间","生命"], lang:"en"},
    {text:"宜将剩勇追穷寇，不可沽名学霸王。", author:"毛泽东", tags:["勇气"], lang:"zh"},
    {text:"Do what you can, with what you have, where you are.", author:"Theodore Roosevelt", tags:["行动"], lang:"en"},
    {text:"人生若只如初见。", author:"纳兰性德", tags:["爱情"], lang:"zh"},
    {text:"A journey is best measured in friends, rather than miles.", author:"Tim Cahill", tags:["友情"], lang:"en"},
    {text:"学而时习之，不亦说乎。", author:"孔子", tags:["学习"], lang:"zh"},
    {text:"当断不断，反受其乱。", author:"古语", tags:["决断"], lang:"zh"},
    {text:"To err is human; to forgive, divine.", author:"Alexander Pope", tags:["宽恕"], lang:"en"},
    {text:"天行健，君子以自强不息。", author:"《周易》", tags:["自强"], lang:"zh"},
    {text:"A goal without a plan is just a wish.", author:"Antoine de Saint-Exupéry", tags:["计划"], lang:"en"},
    {text:"岁寒，然后知松柏之后凋也。", author:"《论语》", tags:["坚韧"], lang:"zh"},
    {text:"Better to light a candle than curse the darkness.", author:"Chinese Proverb", tags:["乐观"], lang:"en"},
    {text:"读书破万卷，下笔如有神。", author:"杜甫", tags:["读书"], lang:"zh"},
    {text:"不尽长江滚滚来。", author:"杜甫", tags:["豪情"], lang:"zh"},
    {text:"If you want to go fast, go alone. If you want to go far, go together.", author:"African Proverb", tags:["合作"], lang:"en"},
    {text:"莫愁前路无知己，天下谁人不识君。", author:"高适", tags:["友情"], lang:"zh"},
    {text:"自助者天助。", author:"古语", tags:["自立"], lang:"zh"},
    {text:"Better to remain silent and be thought a fool than to open your mouth and remove all doubt.", author:"Abraham Lincoln", tags:["言语"], lang:"en"},
    {text:"礼之用，和为贵。", author:"孔子", tags:["和谐"], lang:"zh"},
    {text:"The mind is everything. What you think you become.", author:"Buddha", tags:["心态"], lang:"en"},
    {text:"千淘万漉虽辛苦，吹尽狂沙始到金。", author:"刘禹锡", tags:["磨练"], lang:"zh"},
    {text:"人生在世，不称意，明朝散发弄扁舟。", author:"苏轼", tags:["洒脱"], lang:"zh"},
    {text:"人生得意须尽欢，莫使金樽空对月。", author:"李白", tags:["及时行乐"], lang:"zh"},
    {text:"A wise man will make more opportunities than he finds.", author:"Francis Bacon", tags:["智慧"], lang:"en"},
    {text:"志当存高远。", author:"古语", tags:["志向"], lang:"zh"},
    {text:"行百里者半九十。", author:"古语", tags:["坚持"], lang:"zh"},
    {text:"山重水复疑无路，柳暗花明又一村。", author:"陆游", tags:["希望"], lang:"zh"},
    {text:"Not all those who wander are lost.", author:"J.R.R. Tolkien", tags:["探索"], lang:"en"},
    {text:"宁为鸡口，无为牛后。", author:"古语", tags:["果断"], lang:"zh"},
    {text:"人穷志不穷。", author:"古语", tags:["精神"], lang:"zh"}
  ];

  // ========== 工具与状态 ==========
  function seedRng(seed){ let x = seed >>> 0 || 2463534242; return function(){ x ^= x << 13; x ^= x >>> 17; x ^= x << 5; return (x >>> 0)/4294967295; }; }
  function shuffleArray(arr, rng){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(rng()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; }}
  function nowStr(){ return new Date().toLocaleString(); }

  const quoteTextEl = document.getElementById('quoteText');
  const quoteAuthorEl = document.getElementById('quoteAuthor');
  const quoteMetaEl = document.getElementById('quoteMeta');
  const tagsContainer = document.getElementById('tagsContainer');
  const seedText = document.getElementById('seedText');
  const timeText = document.getElementById('timeText');
  const nextBtn = document.getElementById('nextBtn');
  const copyBtn = document.getElementById('copyBtn');
  const pinBtn = document.getElementById('pinBtn');
  const autoBtn = document.getElementById('autoBtn');
  const exportBtn = document.getElementById('exportBtn');
  const shuffleBtn = document.getElementById('shuffleBtn');
  const authorSelect = document.getElementById('authorSelect');
  const tagSelect = document.getElementById('tagSelect');
  const searchInput = document.getElementById('searchInput');

  let pool = quotes.slice();
  let current = null; let lastSeed = Math.floor(Math.random()*1e9); let autoTimer = null; let shuffledIndices = null; let shufflePos = 0;

  // 初始化作者与标签
  function initFilters(){ const authors=Array.from(new Set(quotes.map(q=>q.author))).sort(); authors.forEach(a=>{ const opt=document.createElement('option'); opt.value=a; opt.textContent=a; authorSelect.appendChild(opt); }); const tags=Array.from(new Set(quotes.flatMap(q=>q.tags))).sort(); tags.forEach(t=>{ const opt=document.createElement('option'); opt.value=t; opt.textContent=t; tagSelect.appendChild(opt); }); }
  initFilters();

  function showQuote(q){ current=q; quoteTextEl.textContent=q.text; quoteAuthorEl.textContent='— ' + (q.author||'佚名'); quoteMetaEl.textContent=`语言：${q.lang||'未知'} · 标签：${(q.tags||[]).join('，')}`; tagsContainer.innerHTML=''; (q.tags||[]).forEach(t=>{ const sp=document.createElement('span'); sp.className='tag'; sp.textContent=t; tagsContainer.appendChild(sp); }); seedText.textContent=lastSeed; timeText.textContent=nowStr(); }

  function pickRandom(seed){ const rng=seedRng(seed||Math.floor(Math.random()*1e9)); const idx=Math.floor(rng()*pool.length); return {item:pool[idx],rng,idx}; }
  function renderBySeed(seed){ lastSeed=seed; const rng=seedRng(seed); const indices=[...Array(pool.length).keys()]; shuffleArray(indices,rng); const chosen=pool[indices[0]]; showQuote(chosen); }

  // 事件
  nextBtn.addEventListener('click', ()=>{ if(pool.length===0) return; if(shuffledIndices){ shufflePos=(shufflePos+1)%shuffledIndices.length; showQuote(pool[shuffledIndices[shufflePos]]); return; } lastSeed=Math.floor(Math.random()*1e9); const {item}=pickRandom(lastSeed); showQuote(item); });
  copyBtn.addEventListener('click', async ()=>{ if(!current) return; const txt=`${current.text}\n— ${current.author||'佚名'}`; try{ await navigator.clipboard.writeText(txt); copyBtn.textContent='已复制 ✓'; setTimeout(()=>copyBtn.textContent='复制',1000); }catch(e){ alert('复制失败，请手动复制：\n'+txt); } });
  pinBtn.addEventListener('click', ()=>{ if(!current) return; const u=new URL(location.href); u.searchParams.set('q','seed:'+lastSeed); history.replaceState(null,'',u.toString()); pinBtn.textContent='已固定 ✓'; setTimeout(()=>pinBtn.textContent='固定链接',1200); });
  autoBtn.addEventListener('click', ()=>{ if(autoTimer){ clearInterval(autoTimer); autoTimer=null; autoBtn.textContent='自动轮播'; } else { autoTimer=setInterval(()=>{ nextBtn.click(); },3500); autoBtn.textContent='停止轮播'; } });
  exportBtn.addEventListener('click', ()=>{ if(!current) return; const content=`${current.text}\n— ${current.author||'佚名'}`; const blob=new Blob([content],{type:'text/plain;charset=utf-8'}); const a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=`quote_${(current.author||'anon').replace(/\s+/g,'_')}.txt`; document.body.appendChild(a); a.click(); a.remove(); });
  shuffleBtn.addEventListener('click', ()=>{ const seed=Math.floor(Math.random()*1e9); const rng=seedRng(seed); shuffledIndices=[...Array(pool.length).keys()]; shuffleArray(shuffledIndices,rng); shufflePos=0; if(shuffledIndices.length>0){ showQuote(pool[shuffledIndices[0]]); } });

  function applyFilters(){ const author=authorSelect.value; const tag=tagSelect.value; const keyword=searchInput.value.trim().toLowerCase(); pool=quotes.filter(q=>{ if(author && q.author!==author) return false; if(tag && !(q.tags||[]).includes(tag)) return false; if(keyword){ const hay=(q.text+' '+(q.author||'')).toLowerCase(); if(!hay.includes(keyword)) return false; } return true; }); shuffledIndices=null; shufflePos=0; if(pool.length===0){ quoteTextEl.textContent='没有找到匹配的句子，请修改筛选条件或清空搜索。'; quoteAuthorEl.textContent=''; quoteMetaEl.textContent=''; tagsContainer.innerHTML=''; } else { lastSeed=Math.floor(Math.random()*1e9); const {item}=pickRandom(lastSeed); showQuote(item); } }
  authorSelect.addEventListener('change', applyFilters); tagSelect.addEventListener('change', applyFilters); searchInput.addEventListener('keydown',(e)=>{ if(e.key==='Enter'){ applyFilters(); } });

  // URL 参数支持 ?q=seed:123 或 ?q=完整句子
  function applyUrlQuery(){ try{ const params=new URLSearchParams(location.search); const q=params.get('q'); if(!q) return false; if(q.startsWith('seed:')){ const s=parseInt(q.split(':')[1],10); if(!isNaN(s)){ renderBySeed(s); return true; } } else { const target=q.trim(); const found=quotes.find(item=>item.text===target|| (item.author+'：'+item.text)===target); if(found){ showQuote(found); return true; } const partial=quotes.find(item=>item.text.includes(target)|| item.author.includes(target)); if(partial){ showQuote(partial); return true; } } }catch(e){} return false; }

  if(!applyUrlQuery()){ lastSeed=Math.floor(Math.random()*1e9); const {item}=pickRandom(lastSeed); showQuote(item); }
  document.addEventListener('keydown',(e)=>{ if(e.code==='Space'){ e.preventDefault(); nextBtn.click(); } });
  </script>
</body>
</html>
